import"./style-CEwA2oRX.js";import{W as l,B as u,i as d,d as m}from"./button-TU6LCu9H.js";import{c as p,a as f,h as y}from"./handleFormErrors-C9BHLmu7.js";function E(){const e="edit-entry",t=localStorage.getItem(e);if(!t)return console.error(`[Storage] Missing key: ${e}`),null;try{return JSON.parse(t)}catch(r){return console.error("[Storage] Failed to parse edit-entry",r),null}}function g(e,t){for(const[r,n]of Object.entries(t)){if(r==="id")continue;const i=e.querySelector(`#${r}`);if(!i){console.warn(`Input element with id: ${r} does not exist.`);continue}r==="startDate"||r==="endDate"?i.value=n.toISOString().split("T")[0]:i.value=String(n)}}function h(e){const t="form",r=document.querySelector(t);if(!r){console.error(`DOM-element ${t} is missing.`);return}g(r,e),r.addEventListener("submit",n=>w(n,e.id))}async function w(e,t){e.preventDefault();const r=e.target,n=new FormData(r),i=p(n),c=document.querySelector('button[type="submit"]');if(!c)return;const a=new u(c);try{const o=new l("https://dt207g-moment2.azurewebsites.net/api/work-experience");a.disable(),a.showLoader(),await o.update(t,i),a.hideLoader();const s=document.querySelectorAll("form input, form textarea");f(s),setTimeout(()=>{window.alert("Work experience has been updated!"),window.location.href="/DT207G-moment2-frontend/"},1)}catch(o){a.enable(),a.hideLoader(),console.log(o),Array.isArray(o)&&o.every(s=>d(s))?y(o):console.error("Unexpected app error",o)}}function S(){const e=E();if(!e){m(document.body,"We couldn't load the work experience you wanted to edit. Please try again from the homepage.");return}h(e)}S();
