import{W as p,i as E,h as u}from"./handleGlobalError-BpL8gP2k.js";function f(e){const o=document.createDocumentFragment();return e.forEach(t=>{const n=document.createElement("article");n.dataset.id=String(t.id);const r=document.createElement("h2");r.innerText=t.jobTitle;const i=document.createElement("p");i.innerText=t.companyName;const d=document.createElement("p");d.innerText=t.workCityLocation;const s=document.createElement("p");s.innerText=t.startDate+" âŽ¯ "+t.endDate;const m=document.createElement("p");m.innerText=t.description;const c=document.createElement("div");c.classList.add("button-container");const a=document.createElement("button");a.innerText="Edit",a.classList.add("edit");const l=document.createElement("button");l.innerText="Delete",l.classList.add("delete"),c.appendChild(a),c.appendChild(l),n.appendChild(r),n.appendChild(i),n.appendChild(d),n.appendChild(s),n.appendChild(m),n.appendChild(c),o.appendChild(n)}),o}function h(e){const o=".work-experience-container",t=document.querySelector(o);if(!t){console.error(`DOM-element ${o} is missing.`);return}const n=f(e);t.appendChild(n)}async function x(){try{return await new p("http://localhost:4000/api/work-experience").getAll()}catch(e){if(Array.isArray(e)&&e.every(o=>E(o))){const o=e;for(const t of o)u(document.body,t)}else console.error("Unexpected app error",e);return null}}const C="/DT207G-moment2-frontend/edit/";function T(e){const o=".edit",t=document.querySelectorAll(o);if(t.length===0){console.error(`DOM-element ${o} does not exist.`);return}t.forEach(n=>{const r=n.closest("article");if(!r){console.error("Article element to which this button belongs to does not exist.");return}for(const i of e)if(String(i.id)===r.dataset.id){n.addEventListener("click",()=>g(i));break}})}function g(e){localStorage.setItem("edit-entry",JSON.stringify(e)),window.location.href=C}async function k(){const e=await x();e&&(h(e),T(e))}k();
